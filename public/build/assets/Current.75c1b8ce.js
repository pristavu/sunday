import{_ as g}from"./AppLayout.286cd52b.js";import{J as f}from"./SectionBorder.ee5ab371.js";import{D as x,a as S,b as w}from"./DataBillingCard.e2c98601.js";import{_ as D}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as o}from"./index.dd8eb344.js";import{j as m,b as _,r as l,o as a,d as e,c,g as p,F as h,a as P,t as n}from"./app.1f7f3af2.js";import"./ConfirmationModal.16a6db1c.js";import"./Modal.9e8c7387.js";import"./DangerButton.22cb1572.js";import"./SecondaryButton.bbb9e25c.js";import"./DialogModal.55009861.js";import"./Button.da32a217.js";const k={props:["sessions","plans","subscriptions","transactions"],components:{AppLayout:g,JetSectionBorder:f,DataCard:x,DataPlanCard:S,DataBillingCard:w},computed:{visibleSubscriptions(){return this.subscriptions.filter(t=>t.status.toLowerCase()!="cancelled")},cards(){return[{title:"Current Monthly Bill",value:this.pendingBalance,links:[{label:"Payment Details",type:"inertia",ref:"/user/billing/current"}]},{title:"Next Payment Due",value:this.nextPaymentDate,links:[{label:"View payment history",type:"inertia",ref:"/user/billing/current"}]},{title:"Last Payment",value:this.lastPayment,links:[]},{title:"Payment Information",value:this.lastPaymentDate,links:[{label:"Redeem coupon",type:"inertia",ref:"/user/billing/current"}]}]},details(){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0]},pendingBalance(){if(this.details){const t=JSON.parse(this.details.next_payment);return t.currency_code+" "+t.value}return 0},lastPayment(){if(this.details){const t=JSON.parse(this.details.last_payment);return t.amount.currency_code+" "+t.amount.value}return"-"},nextPaymentDate(){return this.details?o(new Date(this.details.next_billing_date),"MMM dd, yyyy"):0},lastPaymentDate(){return this.details?o(new Date(this.details.last_payment_date),"MMM dd, yyyy"):"-"}},methods:{sendSubscriptionAction(t,u){const r=`/v2/subscriptions/${t.id}/agreement/${t.agreement_id}/${u}`;axios.post(r).then(()=>{this.$inertia.reload()})},isCurrentPlan(t){return console.log(this.visibleSubscriptions[0].quantity,t.quantity),this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity==t.quantity},getLabelSubscribe(t){return this.isBigger(t)?"Upgrade":"Downgrade"},getPayerName(t){return Object.values(t).join(" ")},getTransactionDate(t){return o(new Date(t),"MMM dd, yyyy")},isBigger(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity<t.quantity}}},C=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Profile ",-1),B={class:"py-10 mx-auto max-w-8xl sm:px-6 lg:px-8"},M={class:"mb-10 subscriptions__container"},N=e("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Current Plan",-1),j={class:"transactions"},q=e("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Transactions",-1),A={class:"w-100"},L={class:"w-100"},$={class:"ml-2"},J={class:"w-100"},U={class:"text-purple-500"},O={class:"text-purple-500"},R={class:"font-bold text-green-500"},T={class:"w-100"};function V(t,u,r,F,E,i){const y=l("data-plan-card"),b=l("jet-section-border"),v=l("app-layout");return a(),m(v,null,{header:_(()=>[C]),default:_(()=>[e("div",null,[e("div",B,[e("div",M,[N,(a(!0),c(h,null,p(i.visibleSubscriptions,s=>(a(),m(y,{key:s.id,plan:s,onSuspend:d=>i.sendSubscriptionAction(s,"suspend"),onReactivate:d=>i.sendSubscriptionAction(s,"reactivate"),onCancel:d=>i.sendSubscriptionAction(s,"cancel")},null,8,["plan","onSuspend","onReactivate","onCancel"]))),128))]),e("div",j,[q,(a(!0),c(h,null,p(r.transactions,s=>(a(),c("div",{key:s.id,class:"flex justify-around px-5 py-10 mx-2 mb-5 bg-white rounded-md shadow-md"},[e("div",A,n(s.status),1),e("div",L,[e("span",null,n(s.payer_email),1),e("span",$,n(i.getPayerName(s.payer_name)),1)]),e("div",J,[e("div",U," USD "+n(s.amount_with_breakdown.net_amount.value),1),e("div",O," USD "+n(s.amount_with_breakdown.fee_amount.value),1),e("div",R," USD "+n(s.amount_with_breakdown.gross_amount.value),1)]),e("div",T,n(i.getTransactionDate(s.time)),1)]))),128))]),P(b)])])]),_:1})}const st=D(k,[["render",V]]);export{st as default};
