import{J as S}from"./ActionMessage.2337fecd.js";import{J as L}from"./ActionSection.db1e9f2b.js";import{J as A}from"./Button.da32a217.js";import{J as N}from"./ConfirmationModal.16a6db1c.js";import{J as V}from"./DangerButton.22cb1572.js";import{J as P}from"./DialogModal.55009861.js";import{J as z,a as D}from"./Label.f51efc9a.js";import{J as E,a as I}from"./InputError.0f634cbb.js";import{J as O}from"./SecondaryButton.bbb9e25c.js";import{J as U}from"./SectionBorder.ee5ab371.js";import{_ as q}from"./_plugin-vue_export-helper.cdc0426e.js";import{c as m,a as s,b as t,e as b,r as i,o as a,f as l,d as r,F as f,g as h,n as _,t as v}from"./app.1f7f3af2.js";import"./SectionTitle.f3f98c1a.js";import"./Modal.9e8c7387.js";const G={components:{JetActionMessage:S,JetActionSection:L,JetButton:A,JetConfirmationModal:N,JetDangerButton:V,JetDialogModal:P,JetFormSection:z,JetInput:E,JetInputError:I,JetLabel:D,JetSecondaryButton:O,JetSectionBorder:U},props:["team","availableRoles","userPermissions"],data(){return{addTeamMemberForm:this.$inertia.form({email:"",role:null},{bag:"addTeamMember",resetOnSuccess:!0}),updateRoleForm:this.$inertia.form({role:null},{bag:"updateRole",resetOnSuccess:!1}),leaveTeamForm:this.$inertia.form({},{bag:"leaveTeam"}),removeTeamMemberForm:this.$inertia.form({},{bag:"removeTeamMember"}),currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null}},methods:{addTeamMember(){this.addTeamMemberForm.post("/teams/"+this.team.id+"/members",{preserveScroll:!0})},manageRole(d){this.managingRoleFor=d,this.updateRoleForm.role=d.membership.role,this.currentlyManagingRole=!0},updateRole(){this.updateRoleForm.put("/teams/"+this.team.id+"/members/"+this.managingRoleFor.id,{preserveScroll:!0}).then(()=>{this.currentlyManagingRole=!1})},confirmLeavingTeam(){this.confirmingLeavingTeam=!0},leaveTeam(){this.leaveTeamForm.delete("/teams/"+this.team.id+"/members/"+this.$page.props.user.id)},confirmTeamMemberRemoval(d){this.teamMemberBeingRemoved=d},removeTeamMember(){this.removeTeamMemberForm.delete("/teams/"+this.team.id+"/members/"+this.teamMemberBeingRemoved.id,{preserveScroll:!0,preserveState:!0}).then(()=>{this.teamMemberBeingRemoved=null})},displayableRole(d){return this.availableRoles.find(n=>n.key==d).name}}},H={key:0},K=r("div",{class:"col-span-6"},[r("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. The email address must be associated with an existing account. ")],-1),Q={class:"col-span-6 sm:col-span-4"},W={key:0,class:"col-span-6 lg:col-span-4"},X={class:"mt-1 border border-gray-200 rounded-lg cursor-pointer"},Y=["onClick"],Z={class:"flex items-center"},$={key:0,class:"w-5 h-5 ml-2 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ee=r("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),oe=[ee],te={class:"mt-2 text-xs text-gray-600"},se={key:1},re={class:"space-y-6"},ne={class:"flex items-center justify-between"},me={class:"flex items-center"},ae=["src"],le={class:"ml-4"},ie={class:"flex items-center"},de=["onClick"],ce={key:1,class:"ml-2 text-sm text-gray-400"},ue=["onClick"],_e={key:0},be={class:"mt-1 border border-gray-200 rounded-lg cursor-pointer"},ge=["onClick"],ve={class:"flex items-center"},pe={key:0,class:"w-5 h-5 ml-2 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},fe=r("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),he=[fe],ye={class:"mt-2 text-xs text-gray-600"};function ke(d,n,c,Me,e,u){const y=i("jet-section-border"),k=i("jet-label"),F=i("jet-input"),M=i("jet-input-error"),C=i("jet-action-message"),T=i("jet-button"),j=i("jet-form-section"),w=i("jet-action-section"),p=i("jet-secondary-button"),J=i("jet-dialog-modal"),R=i("jet-danger-button"),x=i("jet-confirmation-modal");return a(),m("div",null,[c.userPermissions.canAddTeamMembers?(a(),m("div",H,[s(y),s(j,{onSubmitted:u.addTeamMember},{title:t(()=>[l(" Add Team Member ")]),description:t(()=>[l(" Add a new team member to your team, allowing them to collaborate with you. ")]),form:t(()=>[K,r("div",Q,[s(k,{for:"email",value:"Email"}),s(F,{id:"name",type:"text",class:"block w-full mt-1",modelValue:e.addTeamMemberForm.email,"onUpdate:modelValue":n[0]||(n[0]=o=>e.addTeamMemberForm.email=o)},null,8,["modelValue"]),s(M,{message:d.addTeamMemberform.errors.email,class:"mt-2"},null,8,["message"])]),c.availableRoles.length>0?(a(),m("div",W,[s(k,{for:"roles",value:"Role"}),s(M,{message:d.addTeamMemberform.errors.role,class:"mt-2"},null,8,["message"]),r("div",X,[(a(!0),m(f,null,h(c.availableRoles,(o,g)=>(a(),m("div",{class:_(["px-4 py-3",{"border-t border-gray-200":g>0}]),onClick:B=>e.addTeamMemberForm.role=o.key,key:o.id},[r("div",{class:_({"opacity-50":e.addTeamMemberForm.role&&e.addTeamMemberForm.role!=o.key})},[r("div",Z,[r("div",{class:_(["text-sm text-gray-600",{"font-semibold":e.addTeamMemberForm.role==o.key}])},v(o.name),3),e.addTeamMemberForm.role==o.key?(a(),m("svg",$,oe)):b("",!0)]),r("div",te,v(o.description),1)],2)],10,Y))),128))])])):b("",!0)]),actions:t(()=>[s(C,{on:e.addTeamMemberForm.recentlySuccessful,class:"mr-3"},{default:t(()=>[l(" Added. ")]),_:1},8,["on"]),s(T,{class:_({"opacity-25":e.addTeamMemberForm.processing}),disabled:e.addTeamMemberForm.processing},{default:t(()=>[l(" Add ")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])])):b("",!0),c.team.users.length>0?(a(),m("div",se,[s(y),s(w,{class:"mt-10 sm:mt-0"},{title:t(()=>[l(" Team Members ")]),description:t(()=>[l(" All of the people that are part of this team. ")]),content:t(()=>[r("div",re,[(a(!0),m(f,null,h(c.team.users,o=>(a(),m("div",ne,[r("div",me,[r("img",{class:"w-8 h-8 rounded-full",src:o.profile_photo_url},null,8,ae),r("div",le,v(o.name),1)]),r("div",ie,[c.userPermissions.canAddTeamMembers&&c.availableRoles.length>0?(a(),m("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:g=>u.manageRole(o)},v(u.displayableRole(o.membership.role)),9,de)):c.availableRoles.length>0?(a(),m("div",ce,v(u.displayableRole(o.membership.role)),1)):b("",!0),d.$page.props.user.id===o.id?(a(),m("button",{key:2,class:"ml-6 text-sm text-red-500 cursor-pointer focus:outline-none",onClick:n[1]||(n[1]=(...g)=>u.confirmLeavingTeam&&u.confirmLeavingTeam(...g))}," Leave ")):b("",!0),c.userPermissions.canRemoveTeamMembers?(a(),m("button",{key:3,class:"ml-6 text-sm text-red-500 cursor-pointer focus:outline-none",onClick:g=>u.confirmTeamMemberRemoval(o)}," Remove ",8,ue)):b("",!0)])]))),256))])]),_:1})])):b("",!0),s(J,{show:e.currentlyManagingRole,onClose:n[3]||(n[3]=o=>e.currentlyManagingRole=!1)},{title:t(()=>[l(" Manage Role ")]),content:t(()=>[e.managingRoleFor?(a(),m("div",_e,[r("div",be,[(a(!0),m(f,null,h(c.availableRoles,(o,g)=>(a(),m("div",{class:_(["px-4 py-3",{"border-t border-gray-200":g>0}]),onClick:B=>e.updateRoleForm.role=o.key},[r("div",{class:_({"opacity-50":e.updateRoleForm.role&&e.updateRoleForm.role!=o.key})},[r("div",ve,[r("div",{class:_(["text-sm text-gray-600",{"font-semibold":e.updateRoleForm.role==o.key}])},v(o.name),3),e.updateRoleForm.role==o.key?(a(),m("svg",pe,he)):b("",!0)]),r("div",ye,v(o.description),1)],2)],10,ge))),256))])])):b("",!0)]),footer:t(()=>[s(p,{onClick:n[2]||(n[2]=o=>e.currentlyManagingRole=!1)},{default:t(()=>[l(" Nevermind ")]),_:1}),s(T,{class:_(["ml-2",{"opacity-25":e.updateRoleForm.processing}]),onClick:u.updateRole,disabled:e.updateRoleForm.processing},{default:t(()=>[l(" Save ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),s(x,{show:e.confirmingLeavingTeam,onClose:n[5]||(n[5]=o=>e.confirmingLeavingTeam=!1)},{title:t(()=>[l(" Leave Team ")]),content:t(()=>[l(" Are you sure you would like to leave this team? ")]),footer:t(()=>[s(p,{onClick:n[4]||(n[4]=o=>e.confirmingLeavingTeam=!1)},{default:t(()=>[l(" Nevermind ")]),_:1}),s(R,{class:_(["ml-2",{"opacity-25":e.leaveTeamForm.processing}]),onClick:u.leaveTeam,disabled:e.leaveTeamForm.processing},{default:t(()=>[l(" Leave ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),s(x,{show:e.teamMemberBeingRemoved,onClose:n[7]||(n[7]=o=>e.teamMemberBeingRemoved=null)},{title:t(()=>[l(" Remove Team Member ")]),content:t(()=>[l(" Are you sure you would like to remove this person from the team? ")]),footer:t(()=>[s(p,{onClick:n[6]||(n[6]=o=>e.teamMemberBeingRemoved=null)},{default:t(()=>[l(" Nevermind ")]),_:1}),s(R,{class:_(["ml-2",{"opacity-25":e.removeTeamMemberForm.processing}]),onClick:u.removeTeamMember,disabled:e.removeTeamMemberForm.processing},{default:t(()=>[l(" Remove ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const Pe=q(G,[["render",ke]]);export{Pe as default};
