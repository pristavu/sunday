import{_ as b}from"./AppLayout.286cd52b.js";import{J as y}from"./SectionBorder.ee5ab371.js";import{D as _,a as h,b as f}from"./DataBillingCard.e2c98601.js";import{_ as g}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as l}from"./index.dd8eb344.js";import{j as o,b as u,r as a,o as n,d as e,c as x,g as v,F as P,a as S}from"./app.1f7f3af2.js";import"./ConfirmationModal.16a6db1c.js";import"./Modal.9e8c7387.js";import"./DangerButton.22cb1572.js";import"./SecondaryButton.bbb9e25c.js";import"./DialogModal.55009861.js";import"./Button.da32a217.js";const D={props:{plans:{type:Array,default(){return[]}},subscriptions:{type:Array,default(){return[]}}},components:{AppLayout:b,JetSectionBorder:y,DataCard:_,DataPlanCard:h,DataBillingCard:f},computed:{visibleSubscriptions(){return this.subscriptions.filter(t=>t.status.toLowerCase()!="cancelled")},cards(){return[{title:"Current Monthly Bill",value:this.pendingBalance,links:[{label:"Payment Details",type:"inertia",ref:"/user/billing/current"}]},{title:"Next Payment Due",value:this.nextPaymentDate,links:[{label:"View payment history",type:"inertia",ref:"/user/billing/current"}]},{title:"Last Payment",value:this.lastPayment,links:[]},{title:"Payment Information",value:this.lastPaymentDate,links:[{label:"Redeem coupon",type:"inertia",ref:"/user/billing/current"}]}]},details(){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0]},pendingBalance(){if(this.details){const t=JSON.parse(this.details.next_payment);return t.currency_code+" "+t.value}return 0},lastPayment(){if(this.details){const t=JSON.parse(this.details.last_payment);return t.amount.currency_code+" "+t.amount.value}return"-"},nextPaymentDate(){return this.details?l(new Date(this.details.next_billing_date),"MMM dd, yyyy"):0},lastPaymentDate(){return this.details?l(new Date(this.details.last_payment_date),"MMM dd, yyyy"):"-"}},methods:{sendSubscriptionAction(t,r){const s=`/v2/subscriptions/${t.id}/agreement/${t.agreement_id}/${r}`;axios.post(s).then(()=>{this.$inertia.reload()})},isCurrentPlan(t){return console.log(this.visibleSubscriptions[0].quantity,t.quantity),this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity==t.quantity},getLabelSubscribe(t){return this.isBigger(t)?"Upgrade":"Downgrade"},isBigger(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity<t.quantity}}},B=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Profile ",-1),k={class:"py-10 mx-auto max-w-8xl sm:px-6 lg:px-8"},w={class:"mt-5 plans__container"},C=e("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Plans",-1),$={class:"flex justify-between"},M=e("div",{id:"paypal-button-container"},null,-1);function q(t,r,s,L,N,c){const d=a("data-billing-card"),p=a("jet-section-border"),m=a("app-layout");return n(),o(m,null,{header:u(()=>[B]),default:u(()=>[e("div",null,[e("div",k,[e("div",w,[C,e("div",$,[(n(!0),x(P,null,v(s.plans,i=>(n(),o(d,{key:i.id,plan:i,"subscribe-link":`/subscriptions/${i.paypal_plan_id}/subscribe`,"subscribe-label":c.getLabelSubscribe(i)},null,8,["plan","subscribe-link","subscribe-label"]))),128))])]),M,S(p)])])]),_:1})}const H=g(D,[["render",q]]);export{H as default};
